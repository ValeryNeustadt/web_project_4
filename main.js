!function(){"use strict";class e{constructor(e,t){this._name=e.name,this._link=e.link,this._handleCardClick=t}_getTemplate(){return document.querySelector("#gallery").content.querySelector(".element").cloneNode(!0)}generateCard(){return this._element=this._getTemplate(),this._trashButton=this._element.querySelector(".element__trash-button"),this._likeButton=this._element.querySelector(".element__button-like"),this._imageElement=this._element.querySelector(".element__photo"),this._imageText=this._element.querySelector(".element__text"),this._imageText.textContent=this._name,this._imageElement.src=this._link,this._imageElement.alt=`Photo of ${this._link}`,this._setEventListeners(),this._element}_setEventListeners(){this._trashButton.addEventListener("click",this._removeElement),this._likeButton.addEventListener("click",this._toggleLikeButton),this._imageElement.addEventListener("click",(()=>{this._handleCardClick({name:this._name,link:this._link})}))}_removeElement=()=>{this._element.remove(),this._element=null};_toggleLikeButton=()=>{this._likeButton.classList.toggle("element__button-like_active")}}class t{constructor(e,t){this._formElement=t.querySelector(e.formSelector),this._formSelector=e.formSelector,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._buttonElement=this._formElement.querySelector(this._submitButtonSelector)}_showError(e){e.classList.add(this._inputErrorClass);const t=this._formElement.querySelector(`${this._inputSelector}-${e.name}-error`);t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideError(e){e.classList.remove(this._inputErrorClass);const t=this._formElement.querySelector(`${this._inputSelector}-${e.name}-error`);t.textContent="",t.classList.remove(this._errorClass)}toggleButtonState(){this._hasInvalidInput()?(this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.disabled=!0):(this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.disabled=!1)}_hasInvalidInput(){return this._inputs.some((e=>!e.validity.valid))}enableValidation(){this._formElement.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListener()}resetValidity(){this._inputs.forEach((e=>{this._hideError(e)}))}_toggleInputError(e){e.validity.valid?this._hideError(e):this._showError(e)}_setEventListener(){this._inputs=Array.from(this._formElement.querySelectorAll(this._inputSelector)),this._inputs.forEach((e=>{e.addEventListener("input",(()=>{this.toggleButtonState(),this._toggleInputError(e)}))}))}}class s{constructor(e){this._popupSelector=e}open(){this._popupSelector.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupSelector.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose=e=>{"Escape"==e.key&&this.close()};setEventListeners(){this._popupSelector.addEventListener("mousedown",(e=>{(e.target.classList.contains("popup_opened")||e.target.classList.contains("popup__close-button"))&&this.close()}))}}class n extends s{constructor(e,t){super(e),this._handleFormSubmit=t,this._form=this._popupSelector.querySelector(".form"),this._inputList=this._popupSelector.querySelectorAll(".form__input")}_getInputValues(){const e={};return this._inputList.forEach((t=>e[t.name]=t.value)),e}setEventListeners(){this._form.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())})),super.setEventListeners()}close(){super.close(),this._form.reset()}}const o=document.querySelector(".profile__add-button"),r=document.querySelector(".profile__edit-button"),i=document.querySelector("#popup__profileform"),l=document.querySelector("#popup__addplaceform"),a=document.querySelector("#profileform__name"),_=document.querySelector("#profileform__about-me"),u=document.querySelector("#imagepreview"),c={formSelector:".popup__form",inputSelector:".form__input",submitButtonSelector:".form__button",inactiveButtonClass:"form__button_disabled",inputErrorClass:"form__input_type_error",errorClass:"form__error_visible"},p=new t(c,l),m=new t(c,i),h=new class extends s{constructor(e){super(e),this._popupImageContent=this._popupSelector.querySelector(".popup__image-content"),this._popupImageHeader=this._popupSelector.querySelector(".popup__image-header")}_rendrePopupImagePreview(){this._popupImageContent.setAttribute("src",`${this.link}`),this._popupImageContent.setAttribute("alt",`Photo of ${this.name}`),this._popupImageHeader.textContent=this.name}open(e){this.name=e.name,this.link=e.link,super.open(),this._rendrePopupImagePreview()}}(u);function d(t){return new e(t,(e=>{h.open(e)})).generateCard()}h.setEventListeners();const f=new class{constructor(e,t){let{data:s,renderer:n}=e;this._items=s,this._renderer=n,this._container=document.querySelector(t)}renderItems(){this._items.forEach(this._renderer)}appendItem(e){this._container.append(e)}prependItem(e){this._container.prepend(e)}}({data:[{name:"Yosemite Valley",link:"https://code.s3.yandex.net/web-code/yosemite.jpg"},{name:"Lake Louise",link:"https://code.s3.yandex.net/web-code/lake-louise.jpg"},{name:"Bald Mountains",link:"https://code.s3.yandex.net/web-code/bald-mountains.jpg"},{name:"Latemar",link:"https://code.s3.yandex.net/web-code/latemar.jpg"},{name:"Vanoise National Park",link:"https://code.s3.yandex.net/web-code/vanoise.jpg"},{name:"Lago di Braies",link:"https://code.s3.yandex.net/web-code/lago.jpg"}],renderer:e=>{const t=d(e);f.appendItem(t)}},".gallery__elements"),E=new class{constructor(e,t){this._profileName=document.querySelector(e),this._profileProfession=document.querySelector(t)}getUserInfo(){return{profileName:this._profileName.textContent,profileProfession:this._profileProfession.textContent}}setUserInfo(e,t){this._profileName.textContent=e,this._profileProfession.textContent=t}}(".profile__name",".profile__profession"),g=new n(l,(e=>{const t=d({name:e.title,link:e["image-link"]});f.prependItem(t),g.close()})),S=new n(i,(e=>{const t=e.name,s=e["about-me"];E.setUserInfo(t,s),S.close()}));f.renderItems(),p.enableValidation(),m.enableValidation(),g.setEventListeners(),S.setEventListeners(),o.addEventListener("click",(function(){p.toggleButtonState(),p.resetValidity(),g.open()})),r.addEventListener("click",(function(){const e=E.getUserInfo();a.value=e.profileName,_.value=e.profileProfession,m.toggleButtonState(),m.resetValidity(),S.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RCxDQUVBRyxjQUtFLE1BSm1CLENBQ2pCSixZQUFhekgsS0FBSzJILGFBQWExRyxZQUMvQnlHLGtCQUFtQjFILEtBQUs0SCxtQkFBbUIzRyxZQUcvQyxDQUVBNkcsWUFBWWhDLEVBQVdpQyxHQUNyQi9ILEtBQUsySCxhQUFhMUcsWUFBYzZFLEVBQ2hDOUYsS0FBSzRILG1CQUFtQjNHLFlBQWM4RyxDQUN4QyxHSlp5QixpQkFDTSx3QkNnRDNCQyxFQUFnQixJQUFJaEQsRUFBY2EsR0FBZS9GLElBQ3JELE1BSU15SCxFQUFjZixFQUpILENBQ2Z0RyxLQUFNSixFQUFZLE1BQ2xCTSxLQUFNTixFQUFLLGdCQUdiNEcsRUFBWVcsWUFBWUUsR0FDeEJTLEVBQWN2RCxPQUFPLElBR2pCd0QsRUFBZSxJQUFJakQsRUFBY1ksR0FBYzlGLElBQ25ELE1BQU1nRyxFQUFZaEcsRUFBVyxLQUN2QmlJLEVBQWVqSSxFQUFLLFlBQzFCMEgsRUFBU00sWUFBWWhDLEVBQVdpQyxHQUNoQ0UsRUFBYXhELE9BQU8sSUFHdEJpQyxFQUFZTyxjQUNaaEIsRUFBc0J2QyxtQkFDdEJ3QyxFQUFxQnhDLG1CQUNyQnNFLEVBQWNuRCxvQkFDZG9ELEVBQWFwRCxvQkFpQmJhLEVBQWlCckUsaUJBQWlCLFNBZmxDLFdBQ0U0RSxFQUFzQi9DLG9CQUN0QitDLEVBQXNCbkMsZ0JBQ3RCa0UsRUFBY3pELE1BQ2hCLElBWUFvQixFQUFrQnRFLGlCQUFpQixTQVZuQyxXQUNFLE1BQU02RyxFQUFXVixFQUFTSyxjQUMxQi9CLEVBQVVOLE1BQVEwQyxFQUFTVCxZQUMzQjFCLEVBQWFQLE1BQVEwQyxFQUFTUixrQkFDOUJ4QixFQUFxQmhELG9CQUNyQmdELEVBQXFCcEMsZ0JBQ3JCbUUsRUFBYTFELE1BQ2YsRyIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYl9wcm9qZWN0X3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X3ByYWN0aWN1bS8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfcHJhY3RpY3VtLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3RvcihkYXRhLCBoYW5kbGVDYXJkQ2xpY2spIHtcbiAgICB0aGlzLl9uYW1lID0gZGF0YS5uYW1lO1xuICAgIHRoaXMuX2xpbmsgPSBkYXRhLmxpbms7XG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xuICB9XG5cbiAgX2dldFRlbXBsYXRlKCkge1xuICAgIGNvbnN0IGdhbGxlcnlFbGVtZW50ID0gZG9jdW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiI2dhbGxlcnlcIilcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudFwiKVxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcbiAgICByZXR1cm4gZ2FsbGVyeUVsZW1lbnQ7XG4gIH1cblxuICBnZW5lcmF0ZUNhcmQoKSB7XG4gICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XG4gICAgdGhpcy5fdHJhc2hCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fdHJhc2gtYnV0dG9uXCIpO1xuICAgIHRoaXMuX2xpa2VCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fYnV0dG9uLWxpa2VcIik7XG4gICAgdGhpcy5faW1hZ2VFbGVtZW50ID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX3Bob3RvXCIpO1xuICAgIHRoaXMuX2ltYWdlVGV4dCA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X190ZXh0XCIpO1xuICAgIHRoaXMuX2ltYWdlVGV4dC50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XG4gICAgdGhpcy5faW1hZ2VFbGVtZW50LnNyYyA9IHRoaXMuX2xpbms7XG4gICAgdGhpcy5faW1hZ2VFbGVtZW50LmFsdCA9IGBQaG90byBvZiAke3RoaXMuX2xpbmt9YDtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuXG4gICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fdHJhc2hCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX3JlbW92ZUVsZW1lbnQpO1xuICAgIHRoaXMuX2xpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX3RvZ2dsZUxpa2VCdXR0b24pO1xuICAgIHRoaXMuX2ltYWdlRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKHsgbmFtZTogdGhpcy5fbmFtZSwgbGluazogdGhpcy5fbGluayB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIF9yZW1vdmVFbGVtZW50ID0gKCkgPT4ge1xuICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlKCk7XG4gICAgdGhpcy5fZWxlbWVudCA9IG51bGw7XG4gIH07XG5cbiAgX3RvZ2dsZUxpa2VCdXR0b24gPSAoKSA9PiB7XG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKFwiZWxlbWVudF9fYnV0dG9uLWxpa2VfYWN0aXZlXCIpO1xuICB9O1xufVxuIiwiZXhwb3J0IGNsYXNzIEZvcm1WYWxpZGF0aW9uIHtcbiAgY29uc3RydWN0b3IodmFsaWRhdGlvblBhcmFtcywgZm9ybSkge1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybS5xdWVyeVNlbGVjdG9yKHZhbGlkYXRpb25QYXJhbXMuZm9ybVNlbGVjdG9yKTsgLy8gXCIjcG9wdXBfX2FkZHBsYWNlZm9ybVwiIG9yIFwiI3BvcHVwX19wcm9maWxlZm9ybVwiXG4gICAgdGhpcy5fZm9ybVNlbGVjdG9yID0gdmFsaWRhdGlvblBhcmFtcy5mb3JtU2VsZWN0b3I7IC8vXCIucG9wdXBfX2Zvcm1cIixcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gdmFsaWRhdGlvblBhcmFtcy5pbnB1dFNlbGVjdG9yOyAvL1wiLmZvcm1fX2lucHV0XCIsXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSB2YWxpZGF0aW9uUGFyYW1zLnN1Ym1pdEJ1dHRvblNlbGVjdG9yOyAvL1wiLmZvcm1fX2J1dHRvblwiLFxuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSB2YWxpZGF0aW9uUGFyYW1zLmluYWN0aXZlQnV0dG9uQ2xhc3M7IC8vXCJmb3JtX19idXR0b25fZGlzYWJsZWRcIixcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSB2YWxpZGF0aW9uUGFyYW1zLmlucHV0RXJyb3JDbGFzczsgLy9cImZvcm1fX2lucHV0X3R5cGVfZXJyb3JcIixcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gdmFsaWRhdGlvblBhcmFtcy5lcnJvckNsYXNzOyAvL1wiZm9ybV9fZXJyb3JfdmlzaWJsZVwiLFxuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3JcbiAgICApO1xuICB9XG5cbiAgX3Nob3dFcnJvcihpbnB1dEl0ZW0pIHtcbiAgICBpbnB1dEl0ZW0uY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgJHt0aGlzLl9pbnB1dFNlbGVjdG9yfS0ke2lucHV0SXRlbS5uYW1lfS1lcnJvcmBcbiAgICApO1xuICAgIGVycm9yTWVzc2FnZS50ZXh0Q29udGVudCA9IGlucHV0SXRlbS52YWxpZGF0aW9uTWVzc2FnZTtcbiAgICBlcnJvck1lc3NhZ2UuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcbiAgfVxuXG4gIF9oaWRlRXJyb3IoaW5wdXRJdGVtKSB7XG4gICAgaW5wdXRJdGVtLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgYCR7dGhpcy5faW5wdXRTZWxlY3Rvcn0tJHtpbnB1dEl0ZW0ubmFtZX0tZXJyb3JgXG4gICAgKTtcbiAgICBlcnJvck1lc3NhZ2UudGV4dENvbnRlbnQgPSBcIlwiO1xuICAgIGVycm9yTWVzc2FnZS5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICB9XG5cbiAgdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lucHV0cy5zb21lKChpbnB1dCkgPT4ge1xuICAgICAgcmV0dXJuICFpbnB1dC52YWxpZGl0eS52YWxpZDtcbiAgICB9KTtcbiAgfVxuXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0pO1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXIoKTtcbiAgfVxuXG4gIHJlc2V0VmFsaWRpdHkoKSB7XG4gICAgdGhpcy5faW5wdXRzLmZvckVhY2goKGlucHV0SXRlbSkgPT4ge1xuICAgICAgdGhpcy5faGlkZUVycm9yKGlucHV0SXRlbSk7XG4gICAgfSk7XG4gIH1cblxuICBfdG9nZ2xlSW5wdXRFcnJvcihpbnB1dEl0ZW0pIHtcbiAgICBpZiAoaW5wdXRJdGVtLnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICB0aGlzLl9oaWRlRXJyb3IoaW5wdXRJdGVtKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fc2hvd0Vycm9yKGlucHV0SXRlbSk7XG4gICAgfVxuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXIoKSB7XG4gICAgdGhpcy5faW5wdXRzID0gQXJyYXkuZnJvbShcbiAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcilcbiAgICApO1xuICAgIHRoaXMuX2lucHV0cy5mb3JFYWNoKChpbnB1dEl0ZW0pID0+IHtcbiAgICAgIGlucHV0SXRlbS5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgICAgIHRoaXMuX3RvZ2dsZUlucHV0RXJyb3IoaW5wdXRJdGVtKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9wb3B1cFNlbGVjdG9yID0gcG9wdXBTZWxlY3RvcjtcbiAgfVxuXG4gIG9wZW4oKSB7XG4gICAgdGhpcy5fcG9wdXBTZWxlY3Rvci5jbGFzc0xpc3QuYWRkKFwicG9wdXBfb3BlbmVkXCIpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHRoaXMuX3BvcHVwU2VsZWN0b3IuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX29wZW5lZFwiKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICBfaGFuZGxlRXNjQ2xvc2UgPSAoZXZ0KSA9PiB7XG4gICAgaWYgKGV2dC5rZXkgPT0gXCJFc2NhcGVcIikge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfTtcblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9wb3B1cFNlbGVjdG9yLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgKGV2dCkgPT4ge1xuICAgICAgaWYgKFxuICAgICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInBvcHVwX29wZW5lZFwiKSB8fFxuICAgICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInBvcHVwX19jbG9zZS1idXR0b25cIilcbiAgICAgICkge1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cC5qc1wiO1xuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXBTZWxlY3Rvci5xdWVyeVNlbGVjdG9yKFwiLmZvcm1cIik7XG4gICAgdGhpcy5faW5wdXRMaXN0ID0gdGhpcy5fcG9wdXBTZWxlY3Rvci5xdWVyeVNlbGVjdG9yQWxsKFwiLmZvcm1fX2lucHV0XCIpO1xuICB9XG5cbiAgX2dldElucHV0VmFsdWVzKCkge1xuICAgIGNvbnN0IGZvcm1WYWx1ZXMgPSB7fTtcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IChmb3JtVmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWUpKTtcbiAgICByZXR1cm4gZm9ybVZhbHVlcztcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XG4gICAgfSk7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHN1cGVyLmNsb3NlKCk7XG4gICAgdGhpcy5fZm9ybS5yZXNldCgpO1xuICB9XG59XG4iLCJleHBvcnQgY29uc3QgcHJvZmlsZUFkZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiLnByb2ZpbGVfX2VkaXQtYnV0dG9uXCJcbik7XG5cbmV4cG9ydCBjb25zdCBwcm9maWxlTmFtZSA9IFwiLnByb2ZpbGVfX25hbWVcIjtcbmV4cG9ydCBjb25zdCBwcm9maWxlUHJvZmVzc2lvbiA9IFwiLnByb2ZpbGVfX3Byb2Zlc3Npb25cIjtcblxuZXhwb3J0IGNvbnN0IHByb2ZpbGVGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwb3B1cF9fcHJvZmlsZWZvcm1cIik7XG5leHBvcnQgY29uc3QgYWRkUGxhY2VGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwb3B1cF9fYWRkcGxhY2Vmb3JtXCIpO1xuXG5leHBvcnQgY29uc3QgaW5wdXROYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlZm9ybV9fbmFtZVwiKTtcbmV4cG9ydCBjb25zdCBpbnB1dEFib3V0bWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGVmb3JtX19hYm91dC1tZVwiKTtcblxuZXhwb3J0IGNvbnN0IGltYWdlUHJldmlldyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjaW1hZ2VwcmV2aWV3XCIpO1xuZXhwb3J0IGNvbnN0IHZhbGlkYXRpb25QYXJhbXMgPSB7XG4gIGZvcm1TZWxlY3RvcjogXCIucG9wdXBfX2Zvcm1cIixcbiAgaW5wdXRTZWxlY3RvcjogXCIuZm9ybV9faW5wdXRcIixcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLmZvcm1fX2J1dHRvblwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcImZvcm1fX2J1dHRvbl9kaXNhYmxlZFwiLFxuICBpbnB1dEVycm9yQ2xhc3M6IFwiZm9ybV9faW5wdXRfdHlwZV9lcnJvclwiLFxuICBlcnJvckNsYXNzOiBcImZvcm1fX2Vycm9yX3Zpc2libGVcIixcbn07XG5cbmV4cG9ydCBjb25zdCBjYXJkTGlzdFNlY3Rpb24gPSBcIi5nYWxsZXJ5X19lbGVtZW50c1wiO1xuXG5leHBvcnQgY29uc3QgZ2FsbGVyeUNhcmRzSW5wdXRzID0gW1xuICB7XG4gICAgbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL3lvc2VtaXRlLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJMYWtlIExvdWlzZVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGFrZS1sb3Vpc2UuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkJhbGQgTW91bnRhaW5zXCIsXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9iYWxkLW1vdW50YWlucy5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGF0ZW1hci5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiVmFub2lzZSBOYXRpb25hbCBQYXJrXCIsXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS92YW5vaXNlLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGFnby5qcGdcIixcbiAgfSxcbl07XG4iLCJpbXBvcnQgXCIuLi9wYWdlcy9pbmRleC5jc3NcIjtcbmltcG9ydCB7IENhcmQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XG5pbXBvcnQgeyBGb3JtVmFsaWRhdGlvbiB9IGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcbmltcG9ydCB7IFNlY3Rpb24gfSBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XG5pbXBvcnQgeyBQb3B1cFdpdGhGb3JtIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xuaW1wb3J0IHsgVXNlckluZm8gfSBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xuaW1wb3J0IHsgUG9wdXBXaXRoSW1hZ2UgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xuXG5pbXBvcnQge1xuICBwcm9maWxlQWRkQnV0dG9uLFxuICBwcm9maWxlRWRpdEJ1dHRvbixcbiAgcHJvZmlsZU5hbWUsXG4gIHByb2ZpbGVQcm9mZXNzaW9uLFxuICBwcm9maWxlRm9ybSxcbiAgYWRkUGxhY2VGb3JtLFxuICBpbnB1dE5hbWUsXG4gIGlucHV0QWJvdXRtZSxcbiAgaW1hZ2VQcmV2aWV3LFxuICB2YWxpZGF0aW9uUGFyYW1zLFxuICBjYXJkTGlzdFNlY3Rpb24sXG4gIGdhbGxlcnlDYXJkc0lucHV0cyxcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuXG5jb25zdCBhZGRQbGFjZUZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRpb24oXG4gIHZhbGlkYXRpb25QYXJhbXMsXG4gIGFkZFBsYWNlRm9ybVxuKTtcblxuY29uc3QgcHJvZmlsZUZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRpb24odmFsaWRhdGlvblBhcmFtcywgcHJvZmlsZUZvcm0pO1xuXG5jb25zdCBwb3B1cFdpdGhJbWFnZSA9IG5ldyBQb3B1cFdpdGhJbWFnZShpbWFnZVByZXZpZXcpO1xucG9wdXBXaXRoSW1hZ2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuZnVuY3Rpb24gcmVuZGVyQ2FyZChkYXRhKSB7XG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChkYXRhLCAoaW1hZ2VEYXRhKSA9PiB7XG4gICAgcG9wdXBXaXRoSW1hZ2Uub3BlbihpbWFnZURhdGEpO1xuICB9KTtcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkLmdlbmVyYXRlQ2FyZCgpO1xuICByZXR1cm4gY2FyZEVsZW1lbnQ7XG59XG5cbmNvbnN0IGNhcmRTZWN0aW9uID0gbmV3IFNlY3Rpb24oXG4gIHtcbiAgICBkYXRhOiBnYWxsZXJ5Q2FyZHNJbnB1dHMsXG4gICAgcmVuZGVyZXI6IChkYXRhKSA9PiB7XG4gICAgICBjb25zdCBjYXJkRWxlbWVudCA9IHJlbmRlckNhcmQoZGF0YSk7XG4gICAgICBjYXJkU2VjdGlvbi5hcHBlbmRJdGVtKGNhcmRFbGVtZW50KTtcbiAgICB9LFxuICB9LFxuICBjYXJkTGlzdFNlY3Rpb25cbik7XG5cbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHByb2ZpbGVOYW1lLCBwcm9maWxlUHJvZmVzc2lvbik7XG5cbmNvbnN0IGFkZFBsYWNlUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShhZGRQbGFjZUZvcm0sIChkYXRhKSA9PiB7XG4gIGNvbnN0IGNhcmREYXRhID0ge1xuICAgIG5hbWU6IGRhdGFbXCJ0aXRsZVwiXSxcbiAgICBsaW5rOiBkYXRhW1wiaW1hZ2UtbGlua1wiXSxcbiAgfTtcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSByZW5kZXJDYXJkKGNhcmREYXRhKTtcbiAgY2FyZFNlY3Rpb24ucHJlcGVuZEl0ZW0oY2FyZEVsZW1lbnQpO1xuICBhZGRQbGFjZVBvcHVwLmNsb3NlKCk7XG59KTtcblxuY29uc3QgcHJvZmlsZVBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0ocHJvZmlsZUZvcm0sIChkYXRhKSA9PiB7XG4gIGNvbnN0IGlucHV0TmFtZSA9IGRhdGFbXCJuYW1lXCJdO1xuICBjb25zdCBpbnB1dEFib3V0TWUgPSBkYXRhW1wiYWJvdXQtbWVcIl07XG4gIHVzZXJJbmZvLnNldFVzZXJJbmZvKGlucHV0TmFtZSwgaW5wdXRBYm91dE1lKTtcbiAgcHJvZmlsZVBvcHVwLmNsb3NlKCk7XG59KTtcblxuY2FyZFNlY3Rpb24ucmVuZGVySXRlbXMoKTtcbmFkZFBsYWNlRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5wcm9maWxlRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5hZGRQbGFjZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5wcm9maWxlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuZnVuY3Rpb24gaGFuZGxlQWRkQ2FyZEJ1dHRvbkNsaWNrKCkge1xuICBhZGRQbGFjZUZvcm1WYWxpZGF0b3IudG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgYWRkUGxhY2VGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRpdHkoKTtcbiAgYWRkUGxhY2VQb3B1cC5vcGVuKCk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUVkaXRQcm9maWxlQnV0dG9uQ2xpY2soKSB7XG4gIGNvbnN0IHVzZXJEYXRhID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcbiAgaW5wdXROYW1lLnZhbHVlID0gdXNlckRhdGEucHJvZmlsZU5hbWU7XG4gIGlucHV0QWJvdXRtZS52YWx1ZSA9IHVzZXJEYXRhLnByb2ZpbGVQcm9mZXNzaW9uO1xuICBwcm9maWxlRm9ybVZhbGlkYXRvci50b2dnbGVCdXR0b25TdGF0ZSgpO1xuICBwcm9maWxlRm9ybVZhbGlkYXRvci5yZXNldFZhbGlkaXR5KCk7XG4gIHByb2ZpbGVQb3B1cC5vcGVuKCk7XG59XG5cbnByb2ZpbGVBZGRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGhhbmRsZUFkZENhcmRCdXR0b25DbGljayk7XG5wcm9maWxlRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGFuZGxlRWRpdFByb2ZpbGVCdXR0b25DbGljayk7XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXAuanNcIjtcbmV4cG9ydCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX3BvcHVwSW1hZ2VDb250ZW50ID0gdGhpcy5fcG9wdXBTZWxlY3Rvci5xdWVyeVNlbGVjdG9yKFxuICAgICAgXCIucG9wdXBfX2ltYWdlLWNvbnRlbnRcIlxuICAgICk7XG4gICAgdGhpcy5fcG9wdXBJbWFnZUhlYWRlciA9IHRoaXMuX3BvcHVwU2VsZWN0b3IucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiLnBvcHVwX19pbWFnZS1oZWFkZXJcIlxuICAgICk7XG4gIH1cblxuICBfcmVuZHJlUG9wdXBJbWFnZVByZXZpZXcoKSB7XG4gICAgdGhpcy5fcG9wdXBJbWFnZUNvbnRlbnQuc2V0QXR0cmlidXRlKFwic3JjXCIsIGAke3RoaXMubGlua31gKTtcbiAgICB0aGlzLl9wb3B1cEltYWdlQ29udGVudC5zZXRBdHRyaWJ1dGUoXCJhbHRcIiwgYFBob3RvIG9mICR7dGhpcy5uYW1lfWApO1xuICAgIHRoaXMuX3BvcHVwSW1hZ2VIZWFkZXIudGV4dENvbnRlbnQgPSB0aGlzLm5hbWU7XG4gIH1cblxuICBvcGVuKGRhdGEpIHtcbiAgICB0aGlzLm5hbWUgPSBkYXRhLm5hbWU7XG4gICAgdGhpcy5saW5rID0gZGF0YS5saW5rO1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgICB0aGlzLl9yZW5kcmVQb3B1cEltYWdlUHJldmlldygpO1xuICB9XG59XG4iLCJleHBvcnQgY2xhc3MgU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHsgZGF0YSwgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9pdGVtcyA9IGRhdGE7XG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcbiAgfVxuXG4gIHJlbmRlckl0ZW1zKCkge1xuICAgIHRoaXMuX2l0ZW1zLmZvckVhY2godGhpcy5fcmVuZGVyZXIpO1xuICB9XG5cbiAgYXBwZW5kSXRlbShlbGVtZW50KSB7XG4gICAgdGhpcy5fY29udGFpbmVyLmFwcGVuZChlbGVtZW50KTtcbiAgfVxuICBwcmVwZW5kSXRlbShlbGVtZW50KSB7XG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XG4gIH1cbn1cbiIsImV4cG9ydCBjbGFzcyBVc2VySW5mbyB7XG4gIGNvbnN0cnVjdG9yKHByb2ZpbGVOYW1lLCBwcm9maWxlUHJvZmVzc2lvbikge1xuICAgIHRoaXMuX3Byb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwcm9maWxlTmFtZSk7XG4gICAgdGhpcy5fcHJvZmlsZVByb2Zlc3Npb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHByb2ZpbGVQcm9mZXNzaW9uKTtcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIGNvbnN0IHVzZXJWYWx1ZXMgPSB7XG4gICAgICBwcm9maWxlTmFtZTogdGhpcy5fcHJvZmlsZU5hbWUudGV4dENvbnRlbnQsXG4gICAgICBwcm9maWxlUHJvZmVzc2lvbjogdGhpcy5fcHJvZmlsZVByb2Zlc3Npb24udGV4dENvbnRlbnQsXG4gICAgfTtcbiAgICByZXR1cm4gdXNlclZhbHVlcztcbiAgfVxuXG4gIHNldFVzZXJJbmZvKGlucHV0TmFtZSwgaW5wdXRBYm91dE1lKSB7XG4gICAgdGhpcy5fcHJvZmlsZU5hbWUudGV4dENvbnRlbnQgPSBpbnB1dE5hbWU7XG4gICAgdGhpcy5fcHJvZmlsZVByb2Zlc3Npb24udGV4dENvbnRlbnQgPSBpbnB1dEFib3V0TWU7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJDYXJkIiwiY29uc3RydWN0b3IiLCJkYXRhIiwiaGFuZGxlQ2FyZENsaWNrIiwidGhpcyIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl9oYW5kbGVDYXJkQ2xpY2siLCJfZ2V0VGVtcGxhdGUiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiZ2VuZXJhdGVDYXJkIiwiX2VsZW1lbnQiLCJfdHJhc2hCdXR0b24iLCJfbGlrZUJ1dHRvbiIsIl9pbWFnZUVsZW1lbnQiLCJfaW1hZ2VUZXh0IiwidGV4dENvbnRlbnQiLCJzcmMiLCJhbHQiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJhZGRFdmVudExpc3RlbmVyIiwiX3JlbW92ZUVsZW1lbnQiLCJfdG9nZ2xlTGlrZUJ1dHRvbiIsInJlbW92ZSIsImNsYXNzTGlzdCIsInRvZ2dsZSIsIkZvcm1WYWxpZGF0aW9uIiwidmFsaWRhdGlvblBhcmFtcyIsImZvcm0iLCJfZm9ybUVsZW1lbnQiLCJmb3JtU2VsZWN0b3IiLCJfZm9ybVNlbGVjdG9yIiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiX2J1dHRvbkVsZW1lbnQiLCJfc2hvd0Vycm9yIiwiaW5wdXRJdGVtIiwiYWRkIiwiZXJyb3JNZXNzYWdlIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGlkZUVycm9yIiwidG9nZ2xlQnV0dG9uU3RhdGUiLCJfaGFzSW52YWxpZElucHV0IiwiZGlzYWJsZWQiLCJfaW5wdXRzIiwic29tZSIsImlucHV0IiwidmFsaWRpdHkiLCJ2YWxpZCIsImVuYWJsZVZhbGlkYXRpb24iLCJlIiwicHJldmVudERlZmF1bHQiLCJfc2V0RXZlbnRMaXN0ZW5lciIsInJlc2V0VmFsaWRpdHkiLCJmb3JFYWNoIiwiX3RvZ2dsZUlucHV0RXJyb3IiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwU2VsZWN0b3IiLCJvcGVuIiwiX2hhbmRsZUVzY0Nsb3NlIiwiY2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZXZ0Iiwia2V5Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJ0YXJnZXQiLCJjb250YWlucyIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VwZXIiLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9mb3JtIiwiX2lucHV0TGlzdCIsIl9nZXRJbnB1dFZhbHVlcyIsImZvcm1WYWx1ZXMiLCJ2YWx1ZSIsInJlc2V0IiwicHJvZmlsZUFkZEJ1dHRvbiIsInByb2ZpbGVFZGl0QnV0dG9uIiwicHJvZmlsZUZvcm0iLCJhZGRQbGFjZUZvcm0iLCJpbnB1dE5hbWUiLCJpbnB1dEFib3V0bWUiLCJpbWFnZVByZXZpZXciLCJhZGRQbGFjZUZvcm1WYWxpZGF0b3IiLCJwcm9maWxlRm9ybVZhbGlkYXRvciIsInBvcHVwV2l0aEltYWdlIiwiX3BvcHVwSW1hZ2VDb250ZW50IiwiX3BvcHVwSW1hZ2VIZWFkZXIiLCJfcmVuZHJlUG9wdXBJbWFnZVByZXZpZXciLCJzZXRBdHRyaWJ1dGUiLCJyZW5kZXJDYXJkIiwiaW1hZ2VEYXRhIiwiY2FyZFNlY3Rpb24iLCJfcmVmIiwiY29udGFpbmVyU2VsZWN0b3IiLCJyZW5kZXJlciIsIl9pdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJyZW5kZXJJdGVtcyIsImFwcGVuZEl0ZW0iLCJlbGVtZW50IiwiYXBwZW5kIiwicHJlcGVuZEl0ZW0iLCJwcmVwZW5kIiwiY2FyZEVsZW1lbnQiLCJ1c2VySW5mbyIsInByb2ZpbGVOYW1lIiwicHJvZmlsZVByb2Zlc3Npb24iLCJfcHJvZmlsZU5hbWUiLCJfcHJvZmlsZVByb2Zlc3Npb24iLCJnZXRVc2VySW5mbyIsInNldFVzZXJJbmZvIiwiaW5wdXRBYm91dE1lIiwiYWRkUGxhY2VQb3B1cCIsInByb2ZpbGVQb3B1cCIsInVzZXJEYXRhIl0sInNvdXJjZVJvb3QiOiIifQ==